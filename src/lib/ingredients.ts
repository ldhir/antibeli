// Ingredient translations and autocorrections

// Map of non-English names to English equivalents
// Format: "foreign_name": "english_name"
export const INGREDIENT_TRANSLATIONS: Record<string, string> = {
  // Hindi / Indian
  bhindi: "okra",
  aloo: "potato",
  alu: "potato",
  gobi: "cauliflower",
  "phool gobi": "cauliflower",
  palak: "spinach",
  saag: "greens",
  methi: "fenugreek",
  jeera: "cumin",
  zeera: "cumin",
  haldi: "turmeric",
  dhania: "coriander",
  dhaniya: "coriander",
  mirch: "chili",
  mirchi: "chili",
  "hari mirch": "green chili",
  "lal mirch": "red chili",
  adrak: "ginger",
  lahsun: "garlic",
  pyaz: "onion",
  pyaaz: "onion",
  tamatar: "tomato",
  baigan: "eggplant",
  baingan: "eggplant",
  gajar: "carrot",
  matar: "peas",
  mutter: "peas",
  shimla: "bell pepper",
  "shimla mirch": "bell pepper",
  capsicum: "bell pepper",
  karela: "bitter gourd",
  lauki: "bottle gourd",
  ghiya: "bottle gourd",
  turai: "ridge gourd",
  tori: "ridge gourd",
  arbi: "taro",
  mooli: "radish",
  muli: "radish",
  sarson: "mustard",
  rai: "mustard seeds",
  "kali mirch": "black pepper",
  elaichi: "cardamom",
  ilaichi: "cardamom",
  dalchini: "cinnamon",
  laung: "cloves",
  long: "cloves",
  javitri: "mace",
  jaiphal: "nutmeg",
  kesar: "saffron",
  imli: "tamarind",
  aam: "mango",
  kela: "banana",
  seb: "apple",
  angoor: "grapes",
  santara: "orange",
  nimbu: "lemon",
  neembu: "lemon",
  nariyal: "coconut",
  badam: "almond",
  kaju: "cashew",
  pista: "pistachio",
  akhrot: "walnut",
  kishmish: "raisins",
  munakka: "raisins",
  // Legumes / Dals
  chana: "chickpeas",
  chole: "chickpeas",
  chhole: "chickpeas",
  "kabuli chana": "chickpeas",
  "kala chana": "black chickpeas",
  rajma: "kidney beans",
  rajmah: "kidney beans",
  lobia: "black-eyed peas",
  rongi: "black-eyed peas",
  masoor: "red lentils",
  "masoor dal": "red lentils",
  moong: "mung beans",
  mung: "mung beans",
  "moong dal": "mung beans",
  urad: "black gram",
  "urad dal": "black gram",
  toor: "pigeon peas",
  "toor dal": "pigeon peas",
  arhar: "pigeon peas",
  "arhar dal": "pigeon peas",
  "chana dal": "split chickpeas",
  dal: "lentils",
  daal: "lentils",
  // Flours & Grains
  atta: "wheat flour",
  aata: "wheat flour",
  maida: "all-purpose flour",
  besan: "gram flour",
  sooji: "semolina",
  suji: "semolina",
  rava: "semolina",
  chawal: "rice",
  basmati: "basmati rice",
  poha: "flattened rice",
  // Dairy
  ghee: "clarified butter",
  dahi: "yogurt",
  curd: "yogurt",
  paneer: "cottage cheese",
  malai: "cream",
  khoya: "milk solite",
  mawa: "milk solids",
  // Spice mixes
  "garam masala": "garam masala",
  "chaat masala": "chaat masala",
  "sambar masala": "sambar powder",
  "rasam powder": "rasam powder",
  // Other common items
  hing: "asafoetida",
  heeng: "asafoetida",
  ajwain: "carom seeds",
  kalonji: "nigella seeds",
  saunf: "fennel seeds",
  til: "sesame seeds",
  amchur: "dried mango powder",
  amchoor: "dried mango powder",
  "kasuri methi": "dried fenugreek leaves",
  "curry patta": "curry leaves",
  "kadi patta": "curry leaves",
  "tej patta": "bay leaf",
  pudina: "mint",
  tulsi: "basil",

  // Spanish
  ajo: "garlic",
  cebolla: "onion",
  tomate: "tomato",
  pimiento: "pepper",
  limon: "lemon",
  lima: "lime",
  manzana: "apple",
  naranja: "orange",
  platano: "banana",
  uvas: "grapes",
  fresa: "strawberry",
  zanahoria: "carrot",
  papa: "potato",
  patata: "potato",
  arroz: "rice",
  frijoles: "beans",
  pollo: "chicken",
  carne: "beef",
  cerdo: "pork",
  pescado: "fish",
  camaron: "shrimp",
  huevo: "egg",
  leche: "milk",
  queso: "cheese",
  mantequilla: "butter",
  aceite: "oil",
  sal: "salt",
  pimienta: "pepper",
  azucar: "sugar",
  cilantro: "cilantro",
  perejil: "parsley",
  oregano: "oregano",
  comino: "cumin",
  canela: "cinnamon",

  // French
  ail: "garlic",
  oignon: "onion",
  tomate: "tomato",
  citron: "lemon",
  pomme: "apple",
  poire: "pear",
  fraise: "strawberry",
  carotte: "carrot",
  pomme_de_terre: "potato",
  riz: "rice",
  haricots: "beans",
  poulet: "chicken",
  boeuf: "beef",
  porc: "pork",
  poisson: "fish",
  oeuf: "egg",
  lait: "milk",
  fromage: "cheese",
  beurre: "butter",
  huile: "oil",
  sel: "salt",
  poivre: "pepper",
  sucre: "sugar",
  persil: "parsley",
  thym: "thyme",
  romarin: "rosemary",

  // Italian
  aglio: "garlic",
  cipolla: "onion",
  pomodoro: "tomato",
  limone: "lemon",
  mela: "apple",
  fragola: "strawberry",
  carota: "carrot",
  patata: "potato",
  riso: "rice",
  fagioli: "beans",
  pollo: "chicken",
  manzo: "beef",
  maiale: "pork",
  pesce: "fish",
  gamberi: "shrimp",
  uovo: "egg",
  latte: "milk",
  formaggio: "cheese",
  burro: "butter",
  olio: "oil",
  sale: "salt",
  pepe: "pepper",
  zucchero: "sugar",
  basilico: "basil",
  prezzemolo: "parsley",
  origano: "oregano",
  rosmarino: "rosemary",

  // Chinese (Pinyin)
  jiang: "ginger",
  suan: "garlic",
  cong: "scallion",
  yangcong: "onion",
  fanqie: "tomato",
  huluobo: "carrot",
  tudou: "potato",
  dami: "rice",
  jidan: "egg",
  niunai: "milk",
  jirou: "chicken",
  niurou: "beef",
  zhurou: "pork",
  yu: "fish",
  xia: "shrimp",
  doufu: "tofu",
  jiangyou: "soy sauce",
  cu: "vinegar",
  yan: "salt",
  tang: "sugar",
  you: "oil",

  // Japanese (Romanized)
  negi: "green onion",
  shoga: "ginger",
  ninniku: "garlic",
  tamanegi: "onion",
  ninjin: "carrot",
  jagaimo: "potato",
  gohan: "rice",
  tamago: "egg",
  gyuniku: "beef",
  butaniku: "pork",
  toriniku: "chicken",
  sakana: "fish",
  ebi: "shrimp",
  shoyu: "soy sauce",
  miso: "miso",
  shio: "salt",
  satou: "sugar",
  abura: "oil",

  // Korean (Romanized)
  kongnamul: "bean sprouts",
  kimchi: "kimchi",
  gochugaru: "korean chili flakes",
  gochujang: "korean chili paste",
  doenjang: "korean soybean paste",
  sesame: "sesame",
  chamgireum: "sesame oil",
};

// Common misspellings and their corrections
export const SPELLING_CORRECTIONS: Record<string, string> = {
  // Spices
  "star enisse": "star anise",
  "star anisse": "star anise",
  "star anis": "star anise",
  "tumeric": "turmeric",
  "tumrick": "turmeric",
  "cummin": "cumin",
  "cuman": "cumin",
  "cinamon": "cinnamon",
  "cinammon": "cinnamon",
  "cinnamom": "cinnamon",
  "cardamon": "cardamom",
  "cardamum": "cardamom",
  "corriander": "coriander",
  "coriender": "coriander",
  "cilantro": "cilantro",
  "celantro": "cilantro",
  "parsely": "parsley",
  "parsly": "parsley",
  "oregeno": "oregano",
  "origano": "oregano",
  "rosemery": "rosemary",
  "rosmary": "rosemary",
  "thime": "thyme",
  "tyme": "thyme",
  "basil": "basil",
  "bazil": "basil",
  "safforn": "saffron",
  "safron": "saffron",
  "paprica": "paprika",
  "paprica": "paprika",
  "cayanne": "cayenne",
  "cayene": "cayenne",
  "jalepeno": "jalapeno",
  "jalapino": "jalapeno",
  "habenero": "habanero",
  "habernero": "habanero",

  // Vegetables
  "tomatos": "tomatoes",
  "tomatoe": "tomato",
  "potatos": "potatoes",
  "potatoe": "potato",
  "brocoli": "broccoli",
  "brocolli": "broccoli",
  "califlower": "cauliflower",
  "cauliflour": "cauliflower",
  "zuchini": "zucchini",
  "zuchinni": "zucchini",
  "zucinni": "zucchini",
  "eggplant": "eggplant",
  "egg plant": "eggplant",
  "aubergene": "aubergine",
  "aubergeen": "aubergine",
  "spinnach": "spinach",
  "spinich": "spinach",
  "letuce": "lettuce",
  "lettice": "lettuce",
  "cellery": "celery",
  "celary": "celery",
  "aspargus": "asparagus",
  "asparagas": "asparagus",
  "mushrom": "mushroom",
  "mushroon": "mushroom",
  "articoke": "artichoke",
  "artichoak": "artichoke",
  "squash": "squash",
  "sqaush": "squash",
  "cabagge": "cabbage",
  "cabage": "cabbage",
  "brussel sprouts": "brussels sprouts",
  "brussel sprout": "brussels sprouts",
  "brussle sprouts": "brussels sprouts",
  "colliflower": "cauliflower",
  "califlour": "cauliflower",
  "okrah": "okra",
  "okraa": "okra",

  // Fruits
  "bannana": "banana",
  "bananaa": "banana",
  "strawbery": "strawberry",
  "stawberry": "strawberry",
  "bluberry": "blueberry",
  "bluebarry": "blueberry",
  "rasberry": "raspberry",
  "rasperry": "raspberry",
  "pineaple": "pineapple",
  "pinneapple": "pineapple",
  "watermellon": "watermelon",
  "watermelen": "watermelon",
  "cantalope": "cantaloupe",
  "canteloupe": "cantaloupe",
  "avacado": "avocado",
  "avocodo": "avocado",
  "mangoe": "mango",
  "mangos": "mangoes",
  "papya": "papaya",
  "papaia": "papaya",
  "cocunut": "coconut",
  "coconot": "coconut",
  "lemmon": "lemon",
  "lemon": "lemon",
  "oragne": "orange",
  "ornage": "orange",
  "grapefuit": "grapefruit",
  "grape fruit": "grapefruit",
  "peachs": "peaches",
  "plumbs": "plums",
  "cherrys": "cherries",

  // Proteins
  "chiken": "chicken",
  "chickin": "chicken",
  "chickn": "chicken",
  "beaf": "beef",
  "beff": "beef",
  "lam": "lamb",
  "lambb": "lamb",
  "prok": "pork",
  "fisch": "fish",
  "fissh": "fish",
  "salman": "salmon",
  "salmom": "salmon",
  "shrinp": "shrimp",
  "shimp": "shrimp",
  "prawns": "prawns",
  "prawm": "prawn",
  "tofo": "tofu",
  "tofuu": "tofu",

  // Dairy
  "chesse": "cheese",
  "cheeze": "cheese",
  "parmezan": "parmesan",
  "parmesean": "parmesan",
  "mozerella": "mozzarella",
  "mozzarela": "mozzarella",
  "mozarella": "mozzarella",
  "chedder": "cheddar",
  "chedar": "cheddar",
  "yogart": "yogurt",
  "yougurt": "yogurt",
  "yohurt": "yogurt",
  "buttter": "butter",
  "butte": "butter",
  "creme": "cream",
  "creem": "cream",
  "milke": "milk",

  // Grains & Pasta
  "spagetti": "spaghetti",
  "spagheti": "spaghetti",
  "spagettii": "spaghetti",
  "fettucine": "fettuccine",
  "fettucini": "fettuccine",
  "linguinie": "linguine",
  "pene": "penne",
  "pennae": "penne",
  "risoto": "risotto",
  "risottoo": "risotto",
  "quinoa": "quinoa",
  "quinua": "quinoa",
  "couscus": "couscous",
  "cous cous": "couscous",
  "bred": "bread",
  "breade": "bread",
  "flowr": "flour",
  "flor": "flour",
  "whete": "wheat",
  "oatmeel": "oatmeal",
  "oat meal": "oatmeal",

  // Nuts
  "almonds": "almonds",
  "almons": "almonds",
  "almonts": "almonds",
  "walnuts": "walnuts",
  "walnots": "walnuts",
  "peacan": "pecan",
  "peccan": "pecan",
  "cashoo": "cashew",
  "cashu": "cashew",
  "pistachio": "pistachio",
  "pistacio": "pistachio",
  "peanuts": "peanuts",
  "peanut": "peanut",
  "penuts": "peanuts",
  "hazelnut": "hazelnut",
  "hazlenut": "hazelnut",

  // Oils & Condiments
  "olive oil": "olive oil",
  "oliv oil": "olive oil",
  "oilve oil": "olive oil",
  "vegetable oil": "vegetable oil",
  "vegatable oil": "vegetable oil",
  "soy sause": "soy sauce",
  "soya sauce": "soy sauce",
  "vinager": "vinegar",
  "vineger": "vinegar",
  "mustart": "mustard",
  "musterd": "mustard",
  "ketchep": "ketchup",
  "catsup": "ketchup",
  "mayonaise": "mayonnaise",
  "mayonase": "mayonnaise",
  "mayo": "mayonnaise",
  "worcestershire": "worcestershire sauce",
  "worchestershire": "worcestershire sauce",
  "worchester": "worcestershire sauce",

  // Common typos
  "garlci": "garlic",
  "garlik": "garlic",
  "onoin": "onion",
  "oinon": "onion",
  "gigner": "ginger",
  "giner": "ginger",
  "pepepr": "pepper",
  "peper": "pepper",
  "sugat": "sugar",
  "suagr": "sugar",
  "sallt": "salt",
  "slat": "salt",
  "eggg": "egg",
  "eggs": "eggs",
  "egss": "eggs",
  "watter": "water",
  "watre": "water",
};

/**
 * Process an ingredient name:
 * 1. Autocorrect misspellings
 * 2. Translate foreign names to English
 * Returns { displayName, englishName, originalInput }
 */
export function processIngredient(input: string): {
  displayName: string;
  englishName: string;
  originalInput: string;
} {
  const trimmed = input.trim();
  const lower = trimmed.toLowerCase();

  // First, check for spelling corrections
  let corrected = lower;
  for (const [misspelling, correction] of Object.entries(SPELLING_CORRECTIONS)) {
    if (lower === misspelling.toLowerCase()) {
      corrected = correction;
      break;
    }
  }

  // Then, check for translations
  let englishName = corrected;
  let foreignName: string | null = null;

  for (const [foreign, english] of Object.entries(INGREDIENT_TRANSLATIONS)) {
    if (corrected === foreign.toLowerCase() || lower === foreign.toLowerCase()) {
      englishName = english;
      foreignName = trimmed;
      break;
    }
  }

  // Capitalize properly
  const capitalize = (str: string) =>
    str.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(' ');

  const capitalizedEnglish = capitalize(englishName);

  // If there was a translation, show "English (Foreign)"
  // If there was only a spelling correction, show the corrected version
  let displayName: string;
  if (foreignName && englishName !== corrected) {
    displayName = `${capitalizedEnglish} (${capitalize(foreignName)})`;
  } else {
    displayName = capitalizedEnglish;
  }

  return {
    displayName,
    englishName: capitalizedEnglish,
    originalInput: trimmed,
  };
}

/**
 * Get suggestions for partial input (for autocomplete)
 */
export function getSuggestions(partial: string, limit: number = 5): string[] {
  const lower = partial.toLowerCase();
  const suggestions: string[] = [];

  // Check translations
  for (const [foreign, english] of Object.entries(INGREDIENT_TRANSLATIONS)) {
    if (foreign.toLowerCase().startsWith(lower) || english.toLowerCase().startsWith(lower)) {
      suggestions.push(`${english} (${foreign})`);
    }
    if (suggestions.length >= limit) break;
  }

  return suggestions;
}
